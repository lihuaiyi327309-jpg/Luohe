<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯ºå¾·å·¥ä¸š - 3D äº¤äº’é€‰å‹</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        
        /* 1. åœ†ç‚¹æ ·å¼ */
        .dot { 
            background: #3b82f6; width: 12px; height: 12px; border-radius: 50%; 
            border: 2px solid white; cursor: pointer; position: relative;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.8); 
            display: none; z-index: 999;
        }
        .dot.active { display: block !important; animation: popScale 0.4s ease-out; }
        
        /* 2. ä»‹ç»å¡ç‰‡ */
        .label { 
            display: none; background: rgba(255,255,255,0.98); border-radius: 10px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.15); width: 220px; 
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); 
            z-index: 1000; overflow: hidden; border: 1px solid rgba(0,0,0,0.05);
            backdrop-filter: blur(10px); pointer-events: auto;
        }
        .label-header { background: #1e293b; color: white; padding: 8px 12px; font-weight: bold; font-size: 12px; display: flex; justify-content: space-between; }
        .label-body { padding: 12px; color: #64748b; font-size: 11px; line-height: 1.6; }
        .show-info .label { display: block; }

        /* 3. å³ä¾§é›¶ä»¶é¢æ¿ */
        #parts-panel {
            position: absolute; right: 16px; top: 40%; transform: translateY(-50%);
            display: flex; flex-direction: column; gap: 10px; z-index: 50; opacity: 0; transition: all 0.5s; pointer-events: none;
        }
        #parts-panel.visible { opacity: 1; pointer-events: auto; }
        
        .part-btn {
            background: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.5);
            backdrop-filter: blur(8px); width: 48px; height: 48px; border-radius: 14px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 10px; font-weight: bold; color: #1e293b; transition: all 0.3s;
        }

        /* ç»Ÿä¸€æŒ‰é’®é€‰ä¸­è‰²ä¸º #1D1D1DFF */
        .selected-action {
            background: #1D1D1D !important;
            color: white !important;
            border-color: #333 !important;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2) !important;
            transform: scale(1.02);
        }

        .part-btn.selected {
            background: #3b82f6 !important;
            color: white !important;
            border-color: #60a5fa;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            transform: scale(1.08);
        }

        @keyframes popScale { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        #material-menu { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform: translateY(20px); opacity: 0; pointer-events: none; }
        #material-menu.active { transform: translateY(0); opacity: 1; pointer-events: auto; }
        .color-item { width: 34px; height: 34px; border-radius: 50%; border: 3px solid white; cursor: pointer; transition: transform 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .color-item.selected { border-color: #1D1D1D; transform: scale(1.2); }
        .sticky-buy-bar { box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 1001; }

        /* æ¨èäº§å“å¡ç‰‡æ¸å…¥æ•ˆæœ */
        .product-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .product-card:active { transform: scale(0.96); opacity: 0.8; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-x-hidden">

    <nav class="fixed top-0 inset-x-0 p-5 flex items-center justify-between z-[1002] pointer-events-none">
        <a href="index.html" class="w-10 h-10 bg-white/80 backdrop-blur-md rounded-full flex items-center justify-center shadow-sm border pointer-events-auto active:scale-90 transition-transform">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </a>
        <button onclick="alert('å·²æ”¶è—')" class="w-10 h-10 bg-white/80 backdrop-blur-md rounded-full flex items-center justify-center shadow-sm border pointer-events-auto active:scale-90 transition-transform">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
        </button>
    </nav>

    <section class="relative w-full h-[75vh] bg-slate-50 z-10">
        <model-viewer id="main-model" 
            src="ovencf.glb" 
            camera-controls 
            auto-rotate
            camera-orbit="0deg 75deg auto"
            camera-target="0m 1m 0m"
            shadow-intensity="2" 
            exposure="1.2"
            class="w-full h-full outline-none">
            
            <button class="dot" id="dot-1" slot="hotspot-1" data-position="-0.3865m 2.8974m 0.4935m" data-normal="0m 1m 0m">
                <div class="label" onclick="event.stopPropagation()">
                    <div class="label-header"><span>é¼“é£ç”µæœº</span><span class="opacity-50 text-[9px]">PART 01</span></div>
                    <div class="label-body">æ ¸å¿ƒåŠ¨åŠ›éƒ¨ä»¶ï¼Œä¸“ä¸ºå·¥ä¸šé«˜æ¸©ç¯å¢ƒè®¾è®¡ï¼Œæ”¯æŒ 24/7 ä¸é—´æ–­è¿è¡Œã€‚</div>
                </div>
            </button>
            <button class="dot" id="dot-2" slot="hotspot-2" data-position="-1.8439m 1.9867m 0.2101m" data-normal="0m 1m 0m">
                <div class="label" onclick="event.stopPropagation()">
                    <div class="label-header"><span>åŠ çƒ­ç»„ä»¶</span><span class="opacity-50 text-[9px]">PART 02</span></div>
                    <div class="label-body">304ä¸é”ˆé’¢Uå‹é˜µåˆ—æ’å¸ƒï¼Œå‡æ¸©å‡åŒ€ï¼Œçƒ­æ•ˆç‡æå‡35%ã€‚</div>
                </div>
            </button>
            <button class="dot" id="dot-3" slot="hotspot-3" data-position="-2.2856m 1.4417m 1.0262m" data-normal="0m 0m 1m">
                <div class="label" onclick="event.stopPropagation()">
                    <div class="label-header"><span>æ“ä½œé¢æ¿</span><span class="opacity-50 text-[9px]">PART 03</span></div>
                    <div class="label-body">PID æ™ºèƒ½æ§æ¸©ç³»ç»Ÿï¼Œæ”¯æŒå¤šæ®µå·¥è‰ºæ›²çº¿ç¼–ç¨‹ã€‚</div>
                </div>
            </button>

            <div id="parts-panel">
                <button onclick="triggerHotspot('dot-1')" class="part-btn shadow-sm">
                    <svg class="w-4 h-4 mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>ç”µæœº
                </button>
                <button onclick="triggerHotspot('dot-2')" class="part-btn shadow-sm">
                    <svg class="w-4 h-4 mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>åŠ çƒ­
                </button>
                <button onclick="triggerHotspot('dot-3')" class="part-btn shadow-sm">
                    <svg class="w-4 h-4 mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>é¢æ¿
                </button>
            </div>

            <div class="absolute bottom-6 left-6 right-6 flex flex-col gap-3 pointer-events-none">
                <div id="material-menu" class="p-3 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl flex justify-around border border-white/50 pointer-events-auto">
                    <div onclick="changeColor('#303030FF', this)" class="color-item selected" style="background: #303030;"></div>
                    <div onclick="changeColor('#384764FF', this)" class="color-item" style="background: #384764;"></div>
                    <div onclick="changeColor('#C3C1B9FF', this)" class="color-item" style="background: #C3C1B9;"></div>
                </div>

                <div class="flex gap-3 pointer-events-auto">
                    <button id="color-toggle-btn" onclick="toggleMatMenu()" class="flex-1 bg-white/80 backdrop-blur border border-slate-200 py-4 rounded-2xl font-bold shadow-sm transition-all text-xs flex items-center justify-center gap-2">
                        <span>ğŸ¨ å®šåˆ¶é¢œè‰²</span>
                    </button>
                    <button id="explode-btn" onclick="handleControl()" class="flex-1 bg-white/80 backdrop-blur border border-slate-200 text-slate-900 py-4 rounded-2xl font-bold shadow-sm transition-all active:scale-95 text-xs flex items-center justify-center gap-2">
                        <span id="explode-text">ğŸ”§ æ‹†è§£æ¼”ç¤º</span>
                    </button>
                </div>
            </div>
        </model-viewer>
    </section>

    <section class="p-6 relative z-20 bg-white rounded-t-[32px] -mt-8 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
        <div class="flex justify-between items-start mb-2">
            <div class="text-2xl font-black text-blue-600">Â¥ 8,500.00 <span class="text-sm font-normal text-slate-400">èµ·</span></div>
            <div class="text-xs text-slate-400">æœˆé”€ 200+</div>
        </div>
        <h1 class="text-lg font-bold leading-tight mb-4 text-slate-800">è¯ºå¾·å·¥ä¸šçº§çƒ­é£å¾ªç¯é£ç®± - é«˜ç²¾åº¦æ™ºèƒ½æ¸©æ§ç³»åˆ—</h1>
    </section>

    <section>
        <div class="p-6 font-bold text-center text-slate-300 tracking-[0.2em] uppercase text-[10px]">â€” PRODUCT DETAILS â€”</div>
        <img src="Nuode.jpg" class="w-full h-auto" alt="è¯¦æƒ…å›¾">
    </section>

    <section class="p-6 bg-slate-50 pb-32">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-lg font-black text-slate-800 relative inline-block">
                çŒœä½ å–œæ¬¢
                <span class="absolute -bottom-1 left-0 w-8 h-1 bg-blue-600 rounded-full"></span>
            </h2>
            <span class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Recommended</span>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <a href="product-v2.html" class="product-card bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex flex-col">
                <div class="aspect-square bg-slate-50 rounded-xl mb-3 overflow-hidden">
                    <img src="product1.jpg" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&w=300&q=80'" alt="é«˜æ¸©çƒ˜ç®±">
                </div>
                <h3 class="text-xs font-bold text-slate-700 line-clamp-1 mb-1">è¯ºå¾· X1 é«˜æ¸©å¼ºåŒ–çƒ˜ç®±</h3>
                <p class="text-[9px] text-slate-400 mb-2">300Â°C æ’æ¸©/PLCç³»ç»Ÿ</p>
                <div class="mt-auto flex justify-between items-center">
                    <span class="text-blue-600 font-black text-sm">Â¥ 12,800</span>
                    <div class="w-6 h-6 bg-slate-900 rounded-lg flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M12 4v16m8-8H4"></path></svg>
                    </div>
                </div>
            </a>

            <a href="product-v3.html" class="product-card bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex flex-col">
                <div class="aspect-square bg-slate-50 rounded-xl mb-3 overflow-hidden">
                    <img src="product2.jpg" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1537462715879-360eeb61a0ad?auto=format&fit=crop&w=300&q=80'" alt="çœŸç©ºå¹²ç‡¥ç®±">
                </div>
                <h3 class="text-xs font-bold text-slate-700 line-clamp-1 mb-1">è¯ºå¾· Vç³»åˆ— çœŸç©ºå¹²ç‡¥ç®±</h3>
                <p class="text-[9px] text-slate-400 mb-2">é«˜çœŸç©ºåº¦/é˜²çˆ†è®¾è®¡</p>
                <div class="mt-auto flex justify-between items-center">
                    <span class="text-blue-600 font-black text-sm">Â¥ 9,600</span>
                    <div class="w-6 h-6 bg-slate-900 rounded-lg flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M12 4v16m8-8H4"></path></svg>
                    </div>
                </div>
            </a>

            <a href="product-v4.html" class="product-card bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex flex-col">
                <div class="aspect-square bg-slate-50 rounded-xl mb-3 overflow-hidden">
                    <img src="product3.jpg" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1565608087341-404b25458f6d?auto=format&fit=crop&w=300&q=80'" alt="ç²¾å¯†é£ç®±">
                </div>
                <h3 class="text-xs font-bold text-slate-700 line-clamp-1 mb-1">ç²¾å¯†å‹çƒ­é£å¾ªç¯å®éªŒèˆ±</h3>
                <p class="text-[9px] text-slate-400 mb-2">å®éªŒå®¤ä¸“ç”¨/é«˜ç²¾åº¦</p>
                <div class="mt-auto flex justify-between items-center">
                    <span class="text-blue-600 font-black text-sm">Â¥ 6,500</span>
                    <div class="w-6 h-6 bg-slate-900 rounded-lg flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M12 4v16m8-8H4"></path></svg>
                    </div>
                </div>
            </a>

            <a href="product-v5.html" class="product-card bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex flex-col">
                <div class="aspect-square bg-slate-50 rounded-xl mb-3 overflow-hidden">
                    <img src="product4.jpg" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?auto=format&fit=crop&w=300&q=80'" alt="é…ä»¶">
                </div>
                <h3 class="text-xs font-bold text-slate-700 line-clamp-1 mb-1">å·¥ä¸šçº§å®šåˆ¶æ‰˜ç›˜/æ”¯æ¶</h3>
                <p class="text-[9px] text-slate-400 mb-2">316ä¸é”ˆé’¢/åŠ åšæè´¨</p>
                <div class="mt-auto flex justify-between items-center">
                    <span class="text-blue-600 font-black text-sm">Â¥ 450</span>
                    <div class="w-6 h-6 bg-slate-900 rounded-lg flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="3" d="M12 4v16m8-8H4"></path></svg>
                    </div>
                </div>
            </a>
        </div>
    </section>

    <footer class="fixed bottom-0 inset-x-0 bg-white/95 backdrop-blur-xl border-t p-3 pb-8 flex items-center gap-4 sticky-buy-bar">
        <div class="flex gap-4 px-2">
            <div onclick="alert('å’¨è¯¢å®¢æœ')" class="flex flex-col items-center gap-1 cursor-pointer">
                <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                <span class="text-[9px] font-bold text-slate-500">å®¢æœ</span>
            </div>
        </div>
        <div class="flex-1 flex gap-2">
            <button onclick="alert('å·²åŠ è´­')" class="flex-1 bg-slate-100 text-slate-900 py-3 rounded-full font-bold text-sm">åŠ å…¥è´­ç‰©è½¦</button>
            <button onclick="alert('è¿›å…¥æ”¯ä»˜')" class="flex-1 bg-blue-600 text-white py-3 rounded-full font-bold text-sm shadow-lg">ç«‹å³è´­ä¹°</button>
        </div>
    </footer>

    <script>
        const viewer = document.getElementById('main-model');
        const explodeBtn = document.getElementById('explode-btn');
        const explodeText = document.getElementById('explode-text');
        const colorToggleBtn = document.getElementById('color-toggle-btn');
        const matMenu = document.getElementById('material-menu');
        const partsPanel = document.getElementById('parts-panel');
        
        let currentStatus = "IDLE"; 
        const SPEED = 0.015;

        function updateLoop() {
            if (currentStatus === "EXPLODING") {
                if (viewer.currentTime < 0.98) {
                    viewer.currentTime += SPEED;
                    if(viewer.currentTime > 0.5) {
                        toggleDots(true);
                        partsPanel.classList.add('visible'); 
                    }
                } else {
                    viewer.currentTime = 0.999;
                    currentStatus = "LOCKED_END";
                    explodeText.innerText = "ğŸ”„ åˆå¹¶äº§å“";
                }
            } else if (currentStatus === "COLLAPSING") {
                if (viewer.currentTime > 0.02) {
                    viewer.currentTime -= SPEED * 1.5;
                } else {
                    viewer.currentTime = 0;
                    currentStatus = "IDLE";
                    explodeText.innerText = "ğŸ”§ æ‹†è§£æ¼”ç¤º";
                    explodeBtn.classList.remove('selected-action');
                    partsPanel.classList.remove('visible'); 
                    resetSelection();
                }
            }
            requestAnimationFrame(updateLoop);
        }

        function toggleDots(show) {
            document.querySelectorAll('.dot').forEach(dot => {
                if (show) dot.classList.add('active');
                else dot.classList.remove('active', 'show-info');
            });
        }

        function triggerHotspot(id) {
            const dot = document.getElementById(id);
            const isOpen = dot.classList.contains('show-info');
            document.querySelectorAll('.dot').forEach(el => el.classList.remove('show-info'));
            document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('selected'));
            if (!isOpen) {
                dot.classList.add('show-info');
                const idx = id.split('-')[1];
                const targetBtn = document.querySelector(`#parts-panel button:nth-child(${idx})`);
                if(targetBtn) targetBtn.classList.add('selected');
            }
        }

        function resetSelection() {
            document.querySelectorAll('.dot').forEach(el => el.classList.remove('show-info'));
            document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('selected'));
        }

        function handleControl() {
            viewer.pause();
            if (!viewer.animationName && viewer.availableAnimations.length > 0) {
                viewer.animationName = viewer.availableAnimations[0];
            }
            matMenu.classList.remove('active');
            colorToggleBtn.classList.remove('selected-action');

            if (currentStatus === "IDLE" || currentStatus === "COLLAPSING") {
                currentStatus = "EXPLODING";
                explodeText.innerText = "â³ æ‹†è§£ä¸­...";
                explodeBtn.classList.add('selected-action');
            } else {
                toggleDots(false);
                currentStatus = "COLLAPSING";
                explodeText.innerText = "â³ åˆå¹¶ä¸­...";
            }
        }

        function toggleMatMenu() {
            const isActive = matMenu.classList.toggle('active');
            if(isActive) {
                colorToggleBtn.classList.add('selected-action');
            } else {
                colorToggleBtn.classList.remove('selected-action');
            }
        }

        function changeColor(hex, el) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            const mat = viewer.model.materials.find(m => m.name.includes("HammerPaint") || m.name.includes("Switch"));
            if (mat) {
                mat.pbrMetallicRoughness.setBaseColorFactor([r, g, b, 1]);
                document.querySelectorAll('.color-item').forEach(c => c.classList.remove('selected'));
                el.classList.add('selected');
            }
        }

        document.querySelectorAll('.dot').forEach(d => {
            d.addEventListener('click', (e) => {
                e.stopPropagation();
                triggerHotspot(d.id);
            });
        });

        viewer.addEventListener('load', () => {
            viewer.pause();
            requestAnimationFrame(updateLoop);
        });
    </script>
</body>
</html>